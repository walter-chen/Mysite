{% extends "dashboard/dashboard-base.html" %}
  {% block individual %}
	{% load static %}
	<link href="https://cdn.datatables.net/1.10.12/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css" />
	<script src="http://cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>
	<script src="{% static 'dashboard/highcharts/js/highcharts.js' %}"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
	<script src="https://code.highcharts.com/modules/exporting.js"></script>
  {% endblock %}  
  {% block content %}
	<div class ="row">
	  <h1 class ="page-header">合同续签任务量</h1>
	  <div class="col-xs-12" id="columnMap" style="min-width: 310px; height: 400px; max-width: 1200px; margin: 0 auto"></div>
	</div>  
	<table id="example" class="display" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th>合同编号</th>
                <th>合同类型</th>
                <th>开始时间</th>
                <th>结束时间</th>
                <th>区域</th>
            </tr>
        </thead>
        <tbody>
            {% if propertys %}
	      	 {% for property in propertys %}
	         	<tr>
	          	  <td>{{property.contract_code}}</td>
	          	  <td>{{property.contract_type}}</td>
	          	  <td>{{property.start_date|date:"Y-m-d"}}</td>
	          	  <td>{{property.end_date|date:"Y-m-d"}}</td>
	          	  <td>{{property.district_id}}</td>
	        	</tr>
	         {% endfor %}
	         {% endif %}
        </tbody>
    </table>
  {% endblock %}
  
  {% block myscript %}
  
    <script type="text/javascript">
		$(document).ready(function() {
		    $('#example').DataTable( {
		        columnDefs: [ {
		            targets: [ 0 ],
		            orderData: [ 0, 1 ]
		        }, {
		            targets: [ 1 ],
		            orderData: [ 1, 0 ]
		        }, {
		            targets: [ 4 ],
		            orderData: [ 4, 0 ]
		        } ]
		    } );
		} );
	</script>
  
  
	<script type="text/javascript">
	  	$(function () {
	    $('#columnMap').highcharts({
	        chart: {
	            type: 'column'
	        },
	        title: {
	            text: '2016年各区到期合同量'
	        },
	        subtitle: {
	            text: '数据来源: 物业系统'
	        },
	        xAxis: {
	            categories: [
	                '1月',
	                '2月',
	                '3月',
	                '4月',
	                '5月',
	                '6月',
	                '7月',
	                '8月',
	                '9月',
	                '10月',
	                '11月',
	                '12月'
	            ],
	            crosshair: true
	        },
	        yAxis: {
	            min: 0,
	            title: {
	                text: '数量(个)'
	            }
	        },
	        tooltip: {
	            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
	            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
	                '<td style="padding:0"><b>{point.y:.0f} 个</b></td></tr>',
	            footerFormat: '</table>',
	            shared: true,
	            useHTML: true
	        },
	        plotOptions: {
	            column: {
	                pointPadding: 0.2,
	                borderWidth: 0
	            }
	        },
	        series: [{
	            name: '{{DISTRICT_LIST.0}}',
	            data: [{{columnData.0.0}},
	            	   {{columnData.0.1}},
	            	   {{columnData.0.2}},
	            	   {{columnData.0.3}},
	            	   {{columnData.0.4}},
	            	   {{columnData.0.5}},
	            	   {{columnData.0.6}},
	            	   {{columnData.0.7}},
	            	   {{columnData.0.8}},
	            	   {{columnData.0.9}},
	            	   {{columnData.0.10}},
	            	   {{columnData.0.11}},
	            	  ]
	        	},{
	        	name: '{{DISTRICT_LIST.1}}',
	            data: [{{columnData.1.0}},
	            	   {{columnData.1.1}},
	            	   {{columnData.1.2}},
	            	   {{columnData.1.3}},
	            	   {{columnData.1.4}},
	            	   {{columnData.1.5}},
	            	   {{columnData.1.6}},
	            	   {{columnData.1.7}},
	            	   {{columnData.1.8}},
	            	   {{columnData.1.9}},
	            	   {{columnData.1.10}},
	            	   {{columnData.1.11}},
	            	  ]
	        	},{
	        	name: '{{DISTRICT_LIST.2}}',
	            data: [{{columnData.2.0}},
	            	   {{columnData.2.1}},
	            	   {{columnData.2.2}},
	            	   {{columnData.2.3}},
	            	   {{columnData.2.4}},
	            	   {{columnData.2.5}},
	            	   {{columnData.2.6}},
	            	   {{columnData.2.7}},
	            	   {{columnData.2.8}},
	            	   {{columnData.2.9}},
	            	   {{columnData.2.10}},
	            	   {{columnData.2.11}},
	            	  ]
	        	},{
	        	name: '{{DISTRICT_LIST.3}}',
	            data: [{{columnData.3.0}},
	            	   {{columnData.3.1}},
	            	   {{columnData.3.2}},
	            	   {{columnData.3.3}},
	            	   {{columnData.3.4}},
	            	   {{columnData.3.5}},
	            	   {{columnData.3.6}},
	            	   {{columnData.3.7}},
	            	   {{columnData.3.8}},
	            	   {{columnData.3.9}},
	            	   {{columnData.3.10}},
	            	   {{columnData.3.11}},
	            	  ]
	        	},{
	        	name: '{{DISTRICT_LIST.4}}',
	            data: [{{columnData.4.0}},
	            	   {{columnData.4.1}},
	            	   {{columnData.4.2}},
	            	   {{columnData.4.3}},
	            	   {{columnData.4.4}},
	            	   {{columnData.4.5}},
	            	   {{columnData.4.6}},
	            	   {{columnData.4.7}},
	            	   {{columnData.4.8}},
	            	   {{columnData.4.9}},
	            	   {{columnData.4.10}},
	            	   {{columnData.4.11}},
	            	  ]
	        	},{
	        	name: '{{DISTRICT_LIST.5}}',
	            data: [{{columnData.5.0}},
	            	   {{columnData.5.1}},
	            	   {{columnData.5.2}},
	            	   {{columnData.5.3}},
	            	   {{columnData.5.4}},
	            	   {{columnData.5.5}},
	            	   {{columnData.5.6}},
	            	   {{columnData.5.7}},
	            	   {{columnData.5.8}},
	            	   {{columnData.5.9}},
	            	   {{columnData.5.10}},
	            	   {{columnData.5.11}},
	            	  ]
	        	},
	        ]
	    });
	});
    </script>
  
  {% endblock %}




