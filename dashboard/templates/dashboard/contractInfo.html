{% extends "dashboard/dashboard-base.html" %}
  {% block individual %}
	{% load static %}
	<link href="https://cdn.datatables.net/1.10.12/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css" />
	<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>
	<script src="{% static 'dashboard/highcharts/js/highcharts.js' %}"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
	<script src="https://code.highcharts.com/modules/exporting.js"></script>
  {% endblock %}  
  {% block content %}
	<div class ="row">
	  <h1 class ="page-header">合同续签任务量</h1>
	  <div class="col-xs-12" id="columnMap" style="min-width: 310px; height: 400px; max-width: 1200px; margin: 0 auto"></div>
	</div>  
	<table id="example" class="display" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th>合同编号</th>
                <th>合同类型</th>
                <th>开始时间</th>
                <th>结束时间</th>
                <th>区域</th>
            </tr>
        </thead>
        <tbody>
            {% if propertys %}
	      	 {% for property in propertys %}
	         	<tr>
	          	  <td>{{property.contract_code}}</td>
	          	  <td>{{property.contract_type}}</td>
	          	  <td>{{property.start_date|date:"Y-m-d"}}</td>
	          	  <td>{{property.end_date|date:"Y-m-d"}}</td>
	          	  <td>{{property.district_id}}</td>
	        	</tr>
	         {% endfor %}
	         {% endif %}
        </tbody>
    </table>
  {% endblock %}
  
  {% block myscript %}
  
    <script type="text/javascript">
		$(document).ready(function() {
		    $('#example').DataTable( {
		        columnDefs: [ {
		            targets: [ 0 ],
		            orderData: [ 0, 1 ]
		        }, {
		            targets: [ 1 ],
		            orderData: [ 1, 0 ]
		        }, {
		            targets: [ 4 ],
		            orderData: [ 4, 0 ]
		        } ]
		    } );
		} );
	</script>
  
  
	<script type="text/javascript">
	  	$(function () {
	    $('#columnMap').highcharts({
	        chart: {
	            type: 'column'
	        },
	        title: {
	            text: '2016年各区到期合同量'
	        },
	        subtitle: {
	            text: '数据来源: 物业系统'
	        },
	        xAxis: {
	            categories: [
	                '1月',
	                '2月',
	                '3月',
	                '4月',
	                '5月',
	                '6月',
	                '7月',
	                '8月',
	                '9月',
	                '10月',
	                '11月',
	                '12月'
	            ],
	            crosshair: true
	        },
	        yAxis: {
	            min: 0,
	            title: {
	                text: '数量(个)'
	            }
	        },
	        tooltip: {
	            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
	            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
	                '<td style="padding:0"><b>{point.y:.1f} 个</b></td></tr>',
	            footerFormat: '</table>',
	            shared: true,
	            useHTML: true
	        },
	        plotOptions: {
	            column: {
	                pointPadding: 0.2,
	                borderWidth: 0
	            }
	        },
	        series: [{
	            name: '思明',
	            data: [
	            	   {{contracts_Jan.0.contract_amount}},
	            	   {{contracts_Feb.0.contract_amount}},
	            	   {{contracts_Mar.0.contract_amount}},
	            	   {{contracts_Apr.0.contract_amount}},
	            	   {{contracts_May.0.contract_amount}},
	            	   {{contracts_Jun.0.contract_amount}},
	            	   {{contracts_Jul.0.contract_amount}},
	            	   {{contracts_Aug.0.contract_amount}},
	            	   {{contracts_Sep.0.contract_amount}},
	            	   {{contracts_Oct.0.contract_amount}},
	            	   {{contracts_Nov.0.contract_amount}},
	            	   {{contracts_Dec.0.contract_amount}}
	            	   ]
	        }, {
	            name: '{{contracts_Jan.1.district_name}}',
	            data: [{{contracts_Jan.1.contract_amount}},
	            	   {{contracts_Feb.1.contract_amount}},
	            	   {{contracts_Mar.1.contract_amount}},
	            	   {{contracts_Apr.1.contract_amount}},
	            	   {{contracts_May.1.contract_amount}},
	            	   {{contracts_Jun.1.contract_amount}},
	            	   {{contracts_Jul.1.contract_amount}},
	            	   {{contracts_Aug.1.contract_amount}},
	            	   {{contracts_Sep.1.contract_amount}},
	            	   {{contracts_Oct.1.contract_amount}},
	            	   {{contracts_Nov.1.contract_amount}},
	            	   {{contracts_Dec.1.contract_amount}}
	            	   ]
	        }, {
	        	name: '{{contracts_Jan.2.district_name}}',
	            data: [{{contracts_Jan.2.contract_amount}},
	            	   {{contracts_Feb.2.contract_amount}},
	            	   {{contracts_Mar.2.contract_amount}},
	            	   {{contracts_Apr.2.contract_amount}},
	            	   {{contracts_May.2.contract_amount}},
	            	   {{contracts_Jun.2.contract_amount}},
	            	   {{contracts_Jul.2.contract_amount}},
	            	   {{contracts_Aug.2.contract_amount}},
	            	   {{contracts_Sep.2.contract_amount}},
	            	   {{contracts_Oct.2.contract_amount}},
	            	   {{contracts_Nov.2.contract_amount}},
	            	   {{contracts_Dec.2.contract_amount}}
	            	   ]
	        }, {
	        	name: '{{contracts_Jan.3.district_name}}',
	            data: [{{contracts_Jan.3.contract_amount}},
	            	   {{contracts_Feb.3.contract_amount}},
	            	   {{contracts_Mar.3.contract_amount}},
	            	   {{contracts_Apr.3.contract_amount}},
	            	   {{contracts_May.3.contract_amount}},
	            	   {{contracts_Jun.3.contract_amount}},
	            	   {{contracts_Jul.3.contract_amount}},
	            	   {{contracts_Aug.3.contract_amount}},
	            	   {{contracts_Sep.3.contract_amount}},
	            	   {{contracts_Oct.3.contract_amount}},
	            	   {{contracts_Nov.3.contract_amount}},
	            	   {{contracts_Dec.3.contract_amount}}
	            	   ]
	        }, {
	        	name: '{{contracts_Jan.4.district_name}}',
	            data: [{{contracts_Jan.4.contract_amount}},
	            	   {{contracts_Feb.4.contract_amount}},
	            	   {{contracts_Mar.4.contract_amount}},
	            	   {{contracts_Apr.4.contract_amount}},
	            	   {{contracts_May.4.contract_amount}},
	            	   {{contracts_Jun.4.contract_amount}},
	            	   {{contracts_Jul.4.contract_amount}},
	            	   {{contracts_Aug.4.contract_amount}},
	            	   {{contracts_Sep.4.contract_amount}},
	            	   {{contracts_Oct.4.contract_amount}},
	            	   {{contracts_Nov.4.contract_amount}},
	            	   {{contracts_Dec.4.contract_amount}}
	            	   ]
	        }, {
	        	name: '{{contracts_Jan.5.district_name}}',
	            data: [{{contracts_Jan.5.contract_amount}},
	            	   {{contracts_Feb.5.contract_amount}},
	            	   {{contracts_Mar.5.contract_amount}},
	            	   {{contracts_Apr.5.contract_amount}},
	            	   {{contracts_May.5.contract_amount}},
	            	   {{contracts_Jun.5.contract_amount}},
	            	   {{contracts_Jul.5.contract_amount}},
	            	   {{contracts_Aug.5.contract_amount}},
	            	   {{contracts_Sep.5.contract_amount}},
	            	   {{contracts_Oct.5.contract_amount}},
	            	   {{contracts_Nov.5.contract_amount}},
	            	   {{contracts_Dec.5.contract_amount}}
	            	   ]
	        }]
	    });
	});
    </script>
  
  {% endblock %}




